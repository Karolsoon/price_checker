header = """
:Authority:
www.sinsay.com
:Method:
GET
:Path:
/pl/pl/sukienka-midi-ze-wzorem-6142u-mlc
:Scheme:
https
Accept:
text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.7
Accept-Encoding:
gzip, deflate, br
Accept-Language:
pl-PL,pl;q=0.9,en-US;q=0.8,en;q=0.7
Cookie:
X-Lpp-TAB-Slot10=40; X-Lpp-TAB-2301-Slot100=55; CF-IPCountry=PL; AKA_A2=A; ak_bmsc=75C3F3A573A814147C11A1402D331CC1~000000000000000000000000000000~YAAQnjYQYNBHusaIAQAAJfmczRSCHe2tMw8V4IKFCHl56JsHwca9k+CIKG7VvQ3Oa8hKVF8yOUEP0iRkmxiaIyAaRdS0grDf8a8dbzpn2uLO/ch/9lbjur5oQZpS2b5LFIw6dEEHRVN+iHiRgmRIlfUs5aiScTH0vmOaQu5ipd+B11+iKZQTy61Ltk5LMsFYCECh80y8CF1X8RFy3hAAhJvbvIYpzg65uHNCAGEWhocA5PuQRh3cHlDBzbeItJlysmLuucuSWztbzrEqW5wZn4QvbSUwnj1Lsy2D+SemzVH1OGake74a+MzEOEaObPelozdJOcaIRTOlnA7KLtav6sPxLCCBZUvFC2uC3bpyIdvBtC/m77ANnCdhiDrwBAvTirKA5V+v7b16Bw==; _ALGOLIA=anonymous-b9d96e2c-88fa-435a-b3da-269c04527aa0; flags=%7B%22newecoupons%22%3Atrue%2C%22enabledpdrucode%22%3Atrue%2C%22minqtystock%22%3Atrue%2C%22multistickerenabled%22%3Atrue%2C%22photosticker%22%3Atrue%2C%22paymentchangemethod%22%3Atrue%2C%22loadmorebutton%22%3Atrue%2C%22rmax%22%3Atrue%2C%22enablenewtranslations%22%3Atrue%2C%22cookiebotenabled%22%3Atrue%2C%22featuretypes%22%3Atrue%2C%22filterscounter%22%3A1%2C%22enablenewseourlkey%22%3Atrue%2C%22catalogcolorpicker%22%3A1%2C%22disablelimitpriceindex%22%3Atrue%2C%22mobileapiclearanceprice%22%3Atrue%2C%22enablestickericon%22%3Atrue%2C%22seometarobots%22%3Atrue%2C%22disablerecordlogin%22%3Atrue%2C%22couponstickerenabled%22%3Atrue%2C%22fixloadeavattribute%22%3Atrue%2C%22productsopinionsproxy%22%3Atrue%2C%22newpromo%22%3Atrue%2C%22deliverypricewithstoremethod%22%3Atrue%2C%22emailproxy%22%3Atrue%2C%22mobilebreadcrumbs%22%3Atrue%2C%22dynamicyield%22%3Atrue%2C%22dpdpickup%22%3Atrue%2C%22newdynamicyieldcontext%22%3Atrue%2C%22blikoneclicktoken%22%3Atrue%2C%22lpcom%22%3Atrue%2C%22clubpointsenabled%22%3Atrue%2C%22payucheckouttoken%22%3Atrue%2C%22minqtyinfovariant%22%3A1%2C%22ssrfooter%22%3A1%2C%22shippingvisible%22%3A1%2C%22catalogphotostickerdisabled%22%3A1%2C%22historicalpriceenabled%22%3A1%2C%22chatbot%22%3A1%2C%22productcardvideo%22%3A1%2C%22fastendcart%22%3A1%2C%22addtocartwithpricebutton%22%3A1%2C%22timestickerenabled%22%3A1%2C%22inlinesizepickerenabled%22%3A1%2C%22asyncsubmitorder%22%3A1%2C%22submitorderthroughhttprequest%22%3A1%2C%22previewcolorimage%22%3A1%2C%22categorylargephotos%22%3A1%2C%22newnavigationmobile%22%3A1%2C%22sidebar%22%3A1%2C%22newsearch%22%3A1%2C%22newproduct%22%3A1%2C%22-tab-2301-slot100%22%3A55%2C%22-tab-2301-slot100-from-cookie%22%3A55%2C%22-tab-slot%22%3A40%2C%22-tab-slot-from-cookie%22%3A40%7D; frontend=4h164u612p312krt4m94a8ss29; fastend=4h164u612p312krt4m94a8ss29; not_reg=1; first_30=1; _cq_duid=1.1687076799.831wGhCMbyykBL7a; _cq_suid=1.1687076799.7KJwU69UeknyheUd; CookieConsent={stamp:%27vccMKBBkNn/QObL3NZz+3DaFHlEi/aU0K/x8Im/fU9LPO4fOUfx8Fg==%27%2Cnecessary:true%2Cpreferences:true%2Cstatistics:true%2Cmarketing:true%2Cmethod:%27explicit%27%2Cver:1%2Cutc:1687076860213%2Cregion:%27pl%27}; _gcl_aw=GCL.1687076860.Cj0KCQjw1rqkBhCTARIsAAHz7K2rM9q-YLJGdozQnIi3SbEYCooiYmfxFL4UOfVj6uewpCHL7lYyHF4aAky0EALw_wcB; _gcl_au=1.1.251383625.1687076860; productViewCounter=1; productView=1; cd3=1; FPID_=FPID2.2.S%2F12XX5hvjrOC3kkyJf6AvKKxm1ax%2FmYRCOMQOnMRvQ%3D.1687076802; FPLC=eLr52vFVo12SruI%2FRLtiEsjKwcnWteOmbJb6j4jIEPdYNIK%2FaUGZseYLt5ak4ZzN%2F1F%2BdxKnlzayKPLrMIVzra05xitfc%2BYepy2b96qysK7zM%2FwlnoEcpB6iHqJhBw%3D%3D; cto_h2h2=B; sinsayZero=2; performanceGroup=96; __rtbh.uid=%7B%22eventType%22%3A%22uid%22%2C%22id%22%3A%22undefined%22%7D; __rtbh.lid=%7B%22eventType%22%3A%22lid%22%2C%22id%22%3A%22kzNqz7vVW1vuwSiq2Tha%22%7D; _gid=GA1.2.2074473281.1687076861; _gac_UA-74214035-1=1.1687076861.Cj0KCQjw1rqkBhCTARIsAAHz7K2rM9q-YLJGdozQnIi3SbEYCooiYmfxFL4UOfVj6uewpCHL7lYyHF4aAky0EALw_wcB; _fbp=fb.1.1687076861700.1677784920; _tt_enable_cookie=1; _ttp=_bKmopTzSj7WTIZMOb7vDadbnj0; _pin_unauth=dWlkPU5HTmlObVZoWlRrdE1qRTVNQzAwWVdObExXSTROell0WW1ObU0ySTNNR1UzWldGaw; _dyjsession=9qxgi2eojm5k2hb5z1al832ow5vg3jlg; dy_fs_page=www.sinsay.com%2Fpl%2Fpl%2Fkomplet-top-i-majtki-naruto-6852k-04x%3Fcq_cmp%3D19695772306%26cq_con%3D%26cq_term%3D%26cq_med%3Dpla%26cq_plac%3D%26cq_net%3Dx%26gclid%3Dcj0kcqjw1rqkbhctarisaahz7k2rm9q-yljgdozqnii3sbeycooiymfxfl4uofvj6uewpchl7lyyhf4aaky0ealw_wcb; _dy_csc_ses=9qxgi2eojm5k2hb5z1al832ow5vg3jlg; _dy_c_exps=; _dycnst=dg; _dyid=-7543528420675764226; _dycst=dk.m.c.ss.; _dy_geo=PL.EU.PL_30.PL_30_Poznan; _dy_df_geo=Poland..Poznan; _dy_cs_gcg=Dynamic%20Yield%20Experiences; _dy_cs_cookie_items=_dy_cs_gcg; FPGSID=1.1687076860.1687077225.G-RYP3KP7859.0h1IkU3kibjHM4m4nJHKUA.G-VL0BHYFP5G.xRLp7pJL1pRr1sHpFp2hQA; _gac_UA-44949413-1=1.1687077274.Cj0KCQjw1rqkBhCTARIsAAHz7K2rM9q-YLJGdozQnIi3SbEYCooiYmfxFL4UOfVj6uewpCHL7lYyHF4aAky0EALw_wcB; _dy_c_att_exps=; prevPage=https://www.sinsay.com/pl/pl/komplet-top-i-majtki-naruto-6852k-04x?cq_cmp=19695772306&cq_con=&cq_term=&cq_med=pla&cq_plac=&cq_net=x&gclid=Cj0KCQjw1rqkBhCTARIsAAHz7K2rM9q-YLJGdozQnIi3SbEYCooiYmfxFL4UOfVj6uewpCHL7lYyHF4aAky0EALw_wcB; pageViewCounter=2; _dyid_server=-7543528420675764226; bm_sv=E02D1DA730301EABDD2D72975904A421~YAAQnjYQYA7husaIAQAAhU2kzRS0UOxDZ937XE4aWPYdC4xjUTRvCekZxnfJp2pOAdePODhvZWL5oR7IuT2Yh1/EkfkE2mHyvsQK7YdkCSgEOFDOAg9YTBkK+kdtzi1xgk4Up+s7b2f7pPKjFrKnfXIzayb0CRe4W3ZguONg6cIaCTlJe3Wzi/I4nqXsatxgogK2uwnI5ArZ6Q9TTpgyCwdXyWpmt1fUAWYnK3pNsALXPwORSKd4iKXqnos6tdle~1; newsletterCookie=2; _dc_gtm_UA-44949413-1=1; _dy_soct=1069071.1501098.1687076862*1069080.1467759.1687077276*1069080.1477069.1687076862*1069084.1185972.1687077276*1069756.1187754.1687076862.9qxgi2eojm5k2hb5z1al832ow5vg3jlg*1069756.1187756.1687077280.9qxgi2eojm5k2hb5z1al832ow5vg3jlg*1069760.1187784.1687076862.9qxgi2eojm5k2hb5z1al832ow5vg3jlg*1107833.1482803.1687076862*1126234.1372455.1687077279*1136425.1494433.1687077278*1140449.1409966.1687076862.9qxgi2eojm5k2hb5z1al832ow5vg3jlg*1146958.1503553.1687076862*1158999.1450012.1687076862.9qxgi2eojm5k2hb5z1al832ow5vg3jlg*1162710.1498544.1687077276*1169771.1472942.1687077276*1179065.1492500.1687076862.9qxgi2eojm5k2hb5z1al832ow5vg3jlg*1180436.1500161.1687077276; _ga_RYP3KP7859=GS1.1.1687076799.1.1.1687077280.54.0.0; _uetsid=fdbfdb100db111ee85a111ca0d1e8512; _uetvid=fdc02a800db111ee95021fe75d34ee0b; _ga=GA1.2.750486358.1687076802; _dc_gtm_UA-74214035-1=1; cto_bundle=mFdRQV9sNGY1SEJoNVhQRDFEM3cyVXFEdUZnbXpZN0diRDVZaktadjNYc0k3M0xaRjViJTJCMjJDbkpkMWZCdlpScDZyRG9kdHY4Zm1EZ3l6N3VvYWs1OVElMkY3eSUyRjBhOGR6QkdrVndXOFVONUM1N01lUndMZElyWWJiaEJKUDZITUEweCUyQnhITFR4bDdUWXBJbXVpdTB1bnF2UU5nJTJGR1NXaEJZbEtmZ3UxVVJ1djRBQ0JzY1p0MkpsWWlMS2tpSmo2cGxteFds; _dyfs=1687077281195; _dy_toffset=-5; _hjSessionUser_2546431=eyJpZCI6IjUxYzg2NGY4LTA1ZGYtNTc1OC1hNThkLWU4NDk5ZGE4YjkzNSIsImNyZWF0ZWQiOjE2ODcwNzcyODEzMDcsImV4aXN0aW5nIjpmYWxzZX0=; _hjFirstSeen=1; _hjIncludedInSessionSample_2546431=0; _hjSession_2546431=eyJpZCI6IjUwM2FiNWRiLTRhZDMtNDE0ZS1hNmRjLWE1NWM0YzNlNGQxYSIsImNyZWF0ZWQiOjE2ODcwNzcyODEzMjEsImluU2FtcGxlIjpmYWxzZX0=; _hjAbsoluteSessionInProgress=0; _derived_epik=dj0yJnU9NjVGY2dvY3l3VjVwcjhjRWZEbnNHX2Zqb0kyUUgxUjAmbj1mM1kwY0U3dmkyMUdXd2tibXJVbFhRJm09NCZ0PUFBQUFBR1NPd2FFJnJtPTQmcnQ9QUFBQUFHU093YUUmc3A9Mg; _ga_VL0BHYFP5G=GS1.1.1687076799.1.1.1687077284.1.0.0; RT="z=1&dm=www.sinsay.com&si=538aa56b-8456-4875-abdd-3d0f1b39cf3c&ss=lj15yqpw&sl=2&tt=4oi&rl=1&nu=42ssj5m6&cl=ajx4&obo=1&ld=ajxr&r=1ix4otgl&ul=ajxv"
Referer:
https://www.sinsay.com/pl/pl/
Sec-Ch-Ua:
"Not.A/Brand";v="8", "Chromium";v="114", "Google Chrome";v="114"
Sec-Ch-Ua-Mobile:
?0
Sec-Ch-Ua-Platform:
"macOS"
Sec-Fetch-Dest:
document
Sec-Fetch-Mode:
navigate
Sec-Fetch-Site:
same-origin
Sec-Fetch-User:
?1
Upgrade-Insecure-Requests:
1
User-Agent:
Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/114.0.0.0 Safari/537.36
"""

import re
import json
from pprint import pprint


def create_list_from_str(header: str) -> list[str]:
    return [x for x in header.split('\n') if x != '']

def remove_pseudo_headers(header_list: list) -> dict[str]:
    pseudo_regex = re.compile(r'^:(.*):$')
    is_pseudo = 0
    new_headers = []

    for line in header_list:
        if pseudo_regex.search(line):
            is_pseudo = 2
        if is_pseudo > 0:
            is_pseudo -= 1
            continue
        
        if line.endswith(':'):
            line = line[:-1]
        new_headers.append(line)
    return new_headers


def create_headers_dict(clean_header_list: list) -> dict[str]:
    header_keys = clean_header_list[::2]
    header_keys = [x.lower() for x in header_keys]
    heaver_values = clean_header_list[1::2]

    headers = dict(zip(header_keys, heaver_values))
    headers['cookie'] = ''
    return headers


def pop_headers(headers: dict, items_to_pop: list) -> None:
    for item in items_to_pop:
        headers.pop(item)
    return headers

def get_headers(header: str, items_to_pop: list) -> None:
    l = create_list_from_str(header)
    c = remove_pseudo_headers(l)
    d = create_headers_dict(c)
    if items_to_pop:
        pprint(pop_headers(d, items_to_pop))
        return None
    pprint(d)


if __name__ == '__main__':
    get_headers(header, ['cookie', 'referer'])

